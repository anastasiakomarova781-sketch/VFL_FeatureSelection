# –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–±—É—á–µ–Ω–∏–µ –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

## üöÄ –ë–´–°–¢–†–´–ô –ó–ê–ü–£–°–ö (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:
```bash
bash DOCKER_TRAIN.sh
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úì –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç proto —Ñ–∞–π–ª—ã
- ‚úì –ó–∞–ø—É—Å–∫–∞–µ—Ç –ø–∞—Å—Å–∏–≤–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
- ‚úì –ó–∞–ø—É—Å–∫–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–π —Å–µ—Ä–≤–µ—Ä  
- ‚úì –ó–∞–ø—É—Å–∫–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç –æ–±—É—á–µ–Ω–∏—è
- ‚úì –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä—ã –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

---

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –∑–∞–ø—É—Å–∫–∞

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é

1. **–í–æ–π–¥–∏—Ç–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:**
```bash
docker-compose exec vfl-feature-selection bash
```

2. **–í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:**
```bash
cd /app/vfl-master@73591d69c04
export PYTHONPATH='/app/ucbfl_mock:$PYTHONPATH'

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è proto —Ñ–∞–π–ª–æ–≤
bash generate_proto.sh

# –ó–∞–ø—É—Å–∫ –ø–∞—Å—Å–∏–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ (–≤ —Ñ–æ–Ω–µ)
python3 python/training_server_passive.py --work_dir=./example/workdir/passive > /tmp/passive.log 2>&1 &
sleep 8

# –ó–∞–ø—É—Å–∫ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ (–≤ —Ñ–æ–Ω–µ)
python3 python/training_server_active.py --work_dir=./example/workdir/active --passive_server_address=localhost:50001 > /tmp/active.log 2>&1 &
sleep 8

# –ó–∞–ø—É—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞ –æ–±—É—á–µ–Ω–∏—è
python3 example/training_client.py \
    --active-dataset=/app/Data/active_dataset_test.csv \
    --passive-dataset=/app/Data/passive_dataset_test.csv \
    --match-id-name=id \
    --label-name=target
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –û–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π –∏–∑ —Ö–æ—Å—Ç–∞
```bash
docker-compose exec vfl-feature-selection bash -c "cd /app/vfl-master@73591d69c04 && export PYTHONPATH='/app/ucbfl_mock:\$PYTHONPATH' && bash generate_proto.sh && python3 python/training_server_passive.py --work_dir=./example/workdir/passive > /tmp/passive.log 2>&1 & sleep 8 && python3 python/training_server_active.py --work_dir=./example/workdir/active --passive_server_address=localhost:50001 > /tmp/active.log 2>&1 & sleep 8 && python3 example/training_client.py --active-dataset=/app/Data/active_dataset_test.csv --passive-dataset=/app/Data/passive_dataset_test.csv --match-id-name=id --label-name=target"
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–µ—Ä–æ–≤

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤:
```bash
docker-compose exec vfl-feature-selection bash -c "tail -20 /tmp/passive.log"
docker-compose exec vfl-feature-selection bash -c "tail -20 /tmp/active.log"
```

## –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–±—É—á–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä—ã –æ—Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é:
```bash
docker-compose exec vfl-feature-selection bash -c "pkill -f training_server"
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—É—á–µ–Ω–∏—è

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª—å –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤:
- `/app/vfl-master@73591d69c04/example/workdir/active/models/result_model.pkl`
- `/app/vfl-master@73591d69c04/example/workdir/passive/models/result_model.pkl`

–ù–∞ —Ö–æ—Å—Ç–µ —ç—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç:
- `vfl-master@73591d69c04/example/workdir/active/models/result_model.pkl`
- `vfl-master@73591d69c04/example/workdir/passive/models/result_model.pkl`

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥–µ–ª–∏

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –º–æ–¥–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
```bash
python3 check_model.py
```

–ò–ª–∏ —É–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏:
```bash
python3 check_model.py vfl-master@73591d69c04/example/workdir/active/models/result_model.pkl
```

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –í —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **mock ucbfl**, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ. –ú–æ–¥–µ–ª—å –±—É–¥–µ—Ç –ø—É—Å—Ç–æ–π (`{}`). –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã. –î–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º –Ω–∞—Å—Ç–æ—è—â–∏–π `ucbfl` framework.

